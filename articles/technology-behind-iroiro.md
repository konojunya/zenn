---
title: "IROIRO Remixã‚’æ”¯ãˆã‚‹æŠ€è¡“"
emoji: "ğŸ’«"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["nft"]
published: false
publication_name: "microverse_dev"
---

# IROIRO ã¨ã¯ï¼Ÿ

ä¸‡å›½å…±é€šã§æ¥½ã—ã‚ã‚‹ã€Œè‰²ã€ã¨ã„ã†ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’å…ƒã«ã€NFT ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é€šã˜ã¦ã€æ—¥æœ¬ã®ã‚¤ãƒ©ã‚¹ãƒˆæ–‡åŒ–ã€ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã®ä¸–ç•Œé€²å‡ºã‚’ç›®æŒ‡ã™ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚

https://www.iroiro.world

## ã‚¸ã‚§ãƒãƒ¬ãƒ¼ãƒˆ

![](https://storage.googleapis.com/zenn-user-upload/d6e8b2804584-20230831.jpg)

NFT ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯è‰²ã‚“ãªæ‰‹æ³•ã§ NFT ã®ç”»åƒè‡ªä½“ã®ç”Ÿæˆã‚’è¡Œãªã£ã¦ã„ã¾ã™ã€‚IROIRO ã§ã¯ä¸€èˆ¬çš„ãªæœ€ã‚‚ä¸€èˆ¬çš„ãªæ–¹æ³•ã§ã™ãŒãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¥ã«åˆ‡ã‚Šå‡ºã—ãŸå„ãƒ‘ãƒ¼ãƒ„ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§æ•°åƒã®ãƒ‘ã‚¿ãƒ¼ãƒ³æ•°ã®ç”»åƒã®ç”Ÿæˆã‚’ã—ã¦ã„ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/3f520ca2020f-20230831.png)

IROIRO ã‚‚ Figma ã§è¦‹ã‚‹ã¨ã“ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚åŒã˜ã‚ˆã†ã« OpenSea ã®å±æ€§ã«ã‚‚ã‚ã‚‹ç¨‹åº¦åæ˜ ã•ã‚Œã¦ã„ã¾ã™ã€‚

microverse ã§ã¯ã€ `node-canvas` ã‚’ç”¨ã„ã¦ã“ã‚Œã‚‰ã®ç”»åƒã®ãƒ‘ãƒ¼ãƒ„ã‹ã‚‰ NFT ã®ç”»åƒã¨ãªã‚‹ã‚‚ã®ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™ã€‚ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ [hashlips_art_engine](https://github.com/HashLips/hashlips_art_engine) ã¨ã„ã†ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚’å‚è€ƒã«ã€å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

ç”»åƒã®ç”Ÿæˆã§ã™ãŒã€ã‹ãªã‚Šãƒã‚·ãƒ³ãƒ‘ãƒ¯ãƒ¼ã‚’ä½¿ã„ãƒ‘ãƒ¼ãƒ„ã‚‚ãã‚Œãã‚Œ 1,000 x 1,000 ã®ã‚ˆã†ã«å¤§ãã„ãŸã‚ç”Ÿæˆå¾Œã®ç”»åƒã ã‘ã§ã‚‚ã‹ãªã‚Šãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã‚’åœ§è¿«ã—ã¦ã—ã¾ã„ã¾ã™ã€‚microverse ã§ã¯ã€ã“ã®å•é¡ŒãŒã¨ã¦ã‚‚å¤§ãã‹ã£ãŸãŸã‚å°†æ¥çš„ã«ã¯ NFT ã®ç”»åƒã®ç”Ÿæˆã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ã§è¡Œãˆã‚‹ã‚ˆã†ã«èª¿æ•´ã—ãŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚

## ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ

ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å®Ÿè£…ã¯ uwu labs ã® [kiwi](https://twitter.com/0xKiwi_) ã•ã‚“ã«ãŠé¡˜ã„ã—ã¾ã—ãŸã€‚

https://uwulabs.com/

ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼å½¢å¼ã§ä»Šå›ã® IROIRO Remix ã«ã¤ã„ã¦å›ç­”ã‚’ã„ãŸã ã„ãŸã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚

- Q1: å¥‘ç´„ã®è¨­è¨ˆã«é–¢ã—ã¦æ°—ã‚’ã¤ã‘ãŸã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ
  A: å°†æ¥ã€ç°¡å˜ã«é‹ç”¨ã§ãã‚‹ã‚ˆã†ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆè¨­è¨ˆã®æŸ”è»Ÿæ€§ã«ã“ã ã‚ã‚Šã¾ã—ãŸã€‚ã¾ãŸã€è¤‡é›‘ã•ã‚’è»½æ¸›ã—ã€ã‚³ãƒ¼ãƒ‰ã‚’ç›£æŸ»ã—ã‚„ã™ã„çŠ¶æ…‹ã«ä¿ã¤ãŸã‚ã€ã©ã†ã™ã‚Œã°æœ€ã‚‚åŠ¹æœçš„ã«ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚’åˆ†å‰²ã§ãã‚‹ã‹ãªã¨ã„ã¤ã‚‚è€ƒãˆã¦ã„ã¾ã™ã€‚

- Q2: æŠ€è¡“çš„ãªå·¥å¤«ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ
  A2: æœ€å¤§ã®ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€å„ãƒªãƒŸãƒƒã‚¯ã‚¹ã® ID ã«å¼ç¥ ID + Origin IROIRO + Remix Choice ã‚’è¨˜éŒ²ã™ã‚‹æ–¹æ³•ã§ã—ãŸã€‚ ã“ã‚Œã«ã‚ˆã‚Šãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãŒå®¹æ˜“ã«ãªã‚Šã€å…¨ä½“çš„ãªãƒã‚§ãƒƒã‚¯ã‚’ç°¡å˜ã«ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ã¾ãŸã‚¬ã‚¹ä½¿ç”¨é‡ã®å‰Šæ¸›ã•ã‚Œã€ã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã§å®‰å…¨ãªã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚ ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã€å¼ç¥ã®è³¼å…¥ã¨ãƒªãƒŸãƒƒã‚¯ã‚¹ã®ãŸã‚ã® https://delegate.cash/ çµŒç”±ã®å§”è­²ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

- Q3: å¥‘ç´„è¨­è¨ˆã‚„å®Ÿè£…ã§æ°—ã‚’ã¤ã‘ã¦ã„ã‚‹ç‚¹ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ
  Q4: ç§ã¯é–‹ç™ºã™ã‚‹å¯¾è±¡ã‚’ 3 ã¤ã®ç•°ãªã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«åˆ†å‰²ã—ã¾ã—ãŸã€‚ NFT é–¢é€£ã®éƒ¨åˆ†ã¯å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒæœ€ã‚‚ä½ã„ãŸã‚ã€é‡è¦ãªãƒ­ã‚¸ãƒƒã‚¯ã ã‘æ®‹ã—ã¾ã—ãŸã€‚ã‚»ãƒ¼ãƒ«ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¯ã€æ–°ã—ã„ã‚¿ã‚¤ãƒ—ã®è²©å£²å½¢å¼ãŒå¿…è¦ãªå ´åˆã«ã€å°†æ¥çš„ã«è²©å£²æ§‹æˆã‚’ç°¡å˜ã«å¤‰æ›´ã§ãã‚‹ã‚ˆã†åˆ‡ã‚Šåˆ†ã‘ã¦ä½œæˆã—ã¾ã—ãŸã€‚ ã¾ãŸã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚µãƒ¼ãƒãƒ¼ã®è¤‡é›‘ã•ã‚’è»½æ¸›ã—ã€ãƒªãƒŸãƒƒã‚¯ã‚¹çµæœãŒä¸€æšä¸€æšãƒ¦ãƒ‹ãƒ¼ã‚¯ã§ç•°ãªã‚‹ã‚‚ã®ã«ãªã‚‹ã‚ˆã†ã«ã€ãƒªãƒŸãƒƒã‚¯ã‚¹ã‚’å†ç¾ã™ã‚‹ãŸã‚ã®ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã«é…ç½®ã—ã¾ã—ãŸã€‚

- Q4: Dapps é–‹ç™ºè€…ã«ä¼ãˆãŸã„ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ
  A4: ã‚€ã‚„ã¿ã« 1 ã¤ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«ãƒ­ã‚¸ãƒƒã‚¯ã‚’å¤šé‡å®šç¾©ã—ãŸã‚Šã€ä¸å¿…è¦ãªã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆé–“ã«æ¥ç¶šã‚’ä½œæˆã—ãŸã‚Šã—ã¦ã„ãªã„ã‹ã€æ³¨æ„ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ ã™ã¹ã¦ã®å¼ç¥ãŒåŒã˜æ–¹æ³•ã§è²©å£²ã•ã‚Œã‚‹æƒ³å®šãªã®ã§ã€ã‚»ãƒ¼ãƒ«ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«å¼ç¥ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã•ã‚‰ã«è¿½åŠ ã—ãŸã‚Šã€å¼ç¥ NFT ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆè‡ªä½“ã«è²©å£²ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚Œã°ã„ã„ã¨è€ƒãˆã‚‹äººã‚‚ã„ã‚‹ã§ã—ã‚‡ã†ã€‚ã—ã‹ã—ã“ã®ã‚„ã‚Šæ–¹ã§ã¯ã€NFT ãŒã‚»ãƒ¼ãƒ«ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«éåº¦ã«ä¾å­˜ã—ãŸã‚Šã€äºˆæœŸã›ã¬ãƒ­ã‚¸ãƒƒã‚¯ã®ã‚®ãƒ£ãƒƒãƒ—ãŒç™ºç”Ÿã—ãªã„ã‚ˆã†ã«æ…é‡ãªæ¤œè¨ãŒå¿…è¦ã«ãªã£ãŸã‚Šã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ä»–ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¨ã®é–¢ä¿‚ã‚„ã‚³ãƒ¼ãƒ‰è‡ªä½“ã®é‡è¦æ€§ã«åŸºã¥ã„ã¦ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã„ãã¤ã‹ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«åˆ†å‰²ã™ã‚‹ã“ã¨ã§ã€è¤‡é›‘ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¤ã¤ã€èª­ã¿ã‚„ã™ãã‚·ãƒ³ãƒ—ãƒ«ã§å …ç‰¢ãªã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚³ãƒ¼ãƒ‰ã‚’ç¶­æŒã§ãã¾ã™ ğŸ˜„

## ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸

ä»Šå›ã®ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã€Remix ãƒšãƒ¼ã‚¸ã¯ã©ã¡ã‚‰ã‚‚ [Chakra UI](https://chakra-ui.com/) ã‚’ç”¨ã„ã¦ã„ã¾ã™ã€‚ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å‘¨ã‚Šã¯ä¸»ã« [framer-motion](https://www.framer.com/motion/) ã§ã®å®Ÿè£…ã«ãªã‚Šã¾ã™ã€‚

[![shikigami animation](https://i.gyazo.com/dcbd528e8ad66cc868edcd55d5268ffc.gif)](https://gyazo.com/dcbd528e8ad66cc868edcd55d5268ffc)

èƒŒæ™¯ã«ã¯æ˜Ÿç©ºãŒæµ®ã‹ã‚“ã§ã„ã‚‹ã‚ˆã†ãªæƒ…æ™¯ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ãŒã€ã“ã“ã¯ canvas ã§ã®å®Ÿè£…ã«ãªã‚Šã¾ã™ã€‚ãã®ä¸Šã‹ã‚‰ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‹ã‹ã£ãŸ background-image ã‚’ã‹ã¶ã›ã¦å¤œç©ºã«ã—ã¦ã„ã¾ã™ã€‚

[![Image from Gyazo](https://i.gyazo.com/d5636c2689c1be4f66e62af0f1336b90.gif)](https://gyazo.com/d5636c2689c1be4f66e62af0f1336b90)

è‰²ç¥ã¯ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«å¿œã˜ã¦å·¦å³ã«ã‚‚å°‘ã—ç§»å‹•ã—ã¾ã™ã€‚ã“ã‚Œã‚’ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ã§æ‰±ã†ãŸã‚ã« [useBreakpointValue](https://chakra-ui.com/docs/hooks/use-breakpoint-value) ã‚’ç”¨ã„ã¦å®£è¨€çš„ã« Breakpoint æ¯ã«ä½ç½®ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚

```ts
const responsiveShikigamiXOutput = useBreakpointValue({
  base: ["0%", "-50%", "-50%", "35%", "35%", "0%"],
  lg: ["0%", "-38%", "-38%", "22%", "22%", "0%"],
  xl: ["0%", "-38%", "-38%", "22%", "22%", "0%"],
  "2xl": ["0%", "-38%", "-38%", "22%", "22%", "0%"],
});
```

ã•ã‚‰ã«ä¸‹ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹ã¨ã€ã‚­ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ¼ãƒãƒ‹ãƒ¼ã«å¯¾ã—ã¦è‰²ç¥ãŒå¼µã‚Šä»˜ãã‚ˆã†ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã“ã¯ãƒªãƒƒãƒã«æ¼”å‡ºã—ãŸã„ã®ã§ã€å‹•ç”»ã§è¡Œã„ã¾ã™ã€‚ã—ã‹ã—ãã®å¾Œã‚‚è‰²ç¥ãŒä¸‹ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã€DOM ã‹ã‚‰å‰Šé™¤ã—ãŸã‚Šè¦‹ãˆãªãã—ãŸã‚Šã—ãŸã¾ã¾ã ã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒç¶šã„ã¦ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ã‚µã‚¤ã‚ºã‚’ãªã‚‹ã¹ãåˆã‚ã›ã¦å†åº¦è‰²ç¥ã‚’å‡ºç¾ã•ã›ã¦ãã®å¾Œã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã‚ã›ã¦ã„ã¾ã™ã€‚

[![Image from Gyazo](https://i.gyazo.com/fc5efa3efe23a4674607c0aca9855ee1.gif)](https://gyazo.com/fc5efa3efe23a4674607c0aca9855ee1)

ã“ã®éš›ã«ã€å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `video` ã§åŸ‹ã‚è¾¼ã‚“ã§ã„ã¾ã™ãŒ video ã¯ iOS ã®çœé›»åŠ›ãƒ¢ãƒ¼ãƒ‰ãªã©ã®éš›ã« `video.play()` ã® Promise ãŒ rejected ã«ãªã‚Šã¾ã™ã€‚

ã“ã®ãŸã‚ä»¥ä¸‹ã®ã‚ˆã†ã« try-catch ã‚’ã™ã‚‹ãªã‚Šã—ã¦ fallback ã‚’ç”¨æ„ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

```tsx
try {
  await videoRef.play();
} catch (e) {
  // video ãŒè‡ªå‹•å†ç”Ÿã§ããªã‹ã£ãŸå ´åˆã® fallback
}
```

ä»Šå›ã¯ã€ã“ã®å‹•ç”»ã®å†ç”Ÿæ™‚é–“ã ã‘ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ã„ã‚‹å‡¦ç†ãŒå­˜åœ¨ã—ã¾ã™ãŒãã“ã‚’ã‚¹ã‚­ãƒƒãƒ—ã•ã›ã‚‹ã“ã¨ã§ã€ä¸å¿«æ„Ÿã‚’ä¸ãˆãªã„ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã—ãŸã€‚

ã¾ãŸ CSS Animation ã®éš›ã«ã¯ã„ãã¤ã‹æ°—ã‚’ä»˜ã‘ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ãŒ web.dev ã® [animations guide](https://web.dev/animations-guide) ã‚’èª­ã‚€ã¨ã‚ˆã„ã§ã—ã‚‡ã†ã€‚ä¾‹ãˆã° `top`, `left` ã‚’ä½¿ã£ã¦è¦ç´ ã®ä½ç½®ã‚’æŒ‡å®šã™ã‚‹ã®ã§ã¯ãªãã€ `translate` ã‚’ä½¿ã£ã¦å®Ÿè£…ã™ã‚‹ä¾‹ã‚’æŒ™ã’ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/aa239e1f1071-20230831.jpeg)

top ã‚„ left ã¨ translate ã§ã¯ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ã€ã©ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã‹ã‚‰ã‚„ã‚Šç›´ã™ã®ã‹ãŒç•°ãªã‚Šã¾ã™ã€‚

ä¾‹ãˆã° top, left ã‚’ä½¿ã£ã¦å®Ÿè£…ã‚’ã—ãŸå ´åˆã¯ã€ `Layout` ã‹ã‚‰ã‚„ã‚Šç›´ã™ã®ã«å¯¾ã—ã¦ã€translate ã‚’ä½¿ã£ã¦å®Ÿè£…ã‚’ã—ãŸå ´åˆã¯ã€ `Composite` ã ã‘ã‚’å†åº¦è¡Œã†ã ã‘ã«ãªã‚Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ã„å®Ÿè£…ã¨è¨€ãˆã¾ã™ã€‚

![](https://web-dev.imgix.net/image/admin/cMNQR2jBEwa6ku5POXtZ.jpg?auto=format&w=845)

![](https://web-dev.imgix.net/image/admin/3bn44P9h6lR93uBNRXY3.jpg?auto=format&w=845)

è©³ã—ãã¯ã“ã¡ã‚‰ã‚’è¦‹ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚

https://web.dev/animations-guide/#layout

## Remix

![ogp](https://shikigami.iroiro.world/cutiehoney_remix_ogp.png)

ä»Šå›ã® 1st ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã‚­ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ¼ãƒãƒ‹ãƒ¼ã®ã‚³ãƒ©ãƒœã«ãªã£ã¦ãŠã‚Šè‰²ç¥ã®è²©å£²ã¨ REMIX ã‚’ Remix ãƒšãƒ¼ã‚¸ã§è¡Œãªã£ã¦ã„ã¾ã™ã€‚ã‚»ãƒ¼ãƒ«ã§ã¯ã€NFT ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã‚ˆããƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚»ãƒ¼ãƒ«ã¨ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚»ãƒ¼ãƒ«ã¨è¨€ã‚ã‚Œã‚‹ 2 æ®µéšä»¥ä¸Šã®ã‚»ãƒ¼ãƒ«ãƒ•ã‚§ãƒ¼ã‚ºã‚’è¨­ã‘ã¾ã™ã€‚ä¸€èˆ¬çš„ã«ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚»ãƒ¼ãƒ«ã§ã¯ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚»ãƒ¼ãƒ«ã«æ¯”ã¹ã¦å®‰ã‚ã®å€¤æ®µã§è²·ã†ã“ã¨ãŒã§ããŸã‚Šã€ä½•ã‹è¿½åŠ ã®ç‰¹å…¸ãŒã‚ã£ãŸã‚Šã—ã¾ã™ã€‚

REMIX ã§ã¯ IROIRO ã®ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’äº‹å‰ã«ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¦ãŠã„ã¦ãã®ä¿æœ‰æ•°ãªã©ã‚’åŠ å‘³ã—ãŸãƒªã‚¹ãƒˆã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚ã“ã®ãƒªã‚¹ãƒˆã«å…¥ã£ã¦ã‚‹äººã¯ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚»ãƒ¼ãƒ«ã§æ–°ã—ã„ NFT ã‚’è²·ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

Remix ãƒšãƒ¼ã‚¸ã§ã¯ãƒ‡ã‚¸ã‚¿ãƒ«ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã¨ã®æ¥ç¶šã« [thirdweb](https://thirdweb.com/) ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚thirdweb sdk ã‚’ä½¿ã†ã“ã¨ã§ React ã®ä¾¿åˆ©ãª hooks ã‚’æ´»ç”¨ã—ã¦å®Ÿè£…ã§ãã¾ã™ã€‚ä¾‹ãˆã° contract ã¸ã®è‰²ç¥ã®è³¼å…¥ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã«ãªã‚Šã¾ã™ã€‚

### è‰²ç¥ã‚»ãƒ¼ãƒ«

```ts
const buyShikigami = async (amount: number) => {
  /**
   * Private Sale: 0.02 ETH / 1 shikigami
   * Public Sale: 0.04 ETH / 1 shikigami
   */
  const cost = state.price * amount;
  const value = ethers.utils.parseEther(String(cost));
  const contract = await shikigamiSaleContract;

  await contract.call(
    "buyShikigami",
    [args.shikigamiId, amount, data.proof, data.value],
    { value }
  );
};
```

`shikigamiSaleContract` ã¯ thirdweb sdk ã® [sdk.getContract](https://portal.thirdweb.com/typescript/sdk.thirdwebsdk.smartcontract) ã‚’ä½¿ã£ã¦å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚hooks ã‚’ä½¿ã„ãŸã„å ´åˆã¯ [useContract](https://portal.thirdweb.com/react/react.usecontract) ã‚’ä½¿ã†ã®ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚ä»Šå›ã®ã‚³ãƒ¼ãƒ‰ä¸Šã¯ã€æ§˜ã€…ãªã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãŒã§ã¦ãã‚‹ãŸã‚ hooks ã§ã‚„ã‚‹ã‚ˆã‚Šã‚‚ TypeScript SDK ã‚’ç›´æ¥ä½¿ã£ãŸæ–¹ãŒæŸ”è»Ÿã«ã“ã¡ã‚‰ã®è¨­è¨ˆã«åˆã‚ã›ã¦å®Ÿè£…ã§ãã‚‹ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã£ãŸãŸã‚ã€ç›´æ¥ sdk ã‚’ä½¿ã£ãŸã‚³ãƒ¼ãƒ‰ã«ãªã£ã¦ã„ã¾ã™ã€‚

`buyShikigami` ã®å¼•æ•°ã«ã‚ã‚‹ `data.proof` ãŒå…ˆã»ã©å‡ºã¦ããŸãƒ›ãƒ«ãƒ€ãƒ¼ã®ãƒªã‚¹ãƒˆã‚’æŒ‡ã—ã¦ã„ã¾ã™ã€‚ä¸€èˆ¬çš„ã«å®Ÿè£…ãŒåˆ†ã‹ã‚Šã‚„ã™ãã€æ±ç”¨æ€§ã‚‚é«˜ã„ MerkleTree ã‚’ã‚ˆãä½¿ã„ã¾ã™ã€‚MerkleTree ã®å®Ÿè£…ã¯ä»¥ä¸‹ã®ã‚ˆã†ãª utility ã‚’ä½œã‚‹ã“ã¨ã§ä½¿ã„å‹æ‰‹ãŒè‰¯ãã€ unit test ã‚‚æ›¸ã‘ã‚‹ã®ã§å¥½ã¾ã—ã„ã§ã—ã‚‡ã†ã€‚

```ts
import { MerkleTree } from "merkletreejs";
import keccak256 from "keccak256";
import whiteList from "@_generated/al";
import { utils } from "ethers";

export function encodePacked(type: readonly string[], value: any[]) {
  return utils.solidityPack(type, value);
}

const leafNodes = whiteList.map((x) =>
  keccak256(encodePacked(["address", "uint256"], [x.address, x.maxMint]))
);

export const merkleTree = new MerkleTree(leafNodes, keccak256, {
  sortPairs: true,
});

export function getRoot() {
  return merkleTree.getHexRoot();
}

export function getMaxMintByAddress(address: string) {
  return (
    whiteList.find(
      (x) => x.address.toLocaleLowerCase() === address.toLocaleLowerCase()
    )?.maxMint ?? 0
  );
}

export function getProof(address: string) {
  const maxMint = getMaxMintByAddress(address);
  const leafIndex = merkleTree.getLeafIndex(
    keccak256(encodePacked(["address", "uint256"], [address, maxMint]))
  );
  const leaf = merkleTree.getLeaf(leafIndex);
  const proof = merkleTree.getHexProof(leaf);

  return proof;
}
```

whileList ã¯ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã®æƒ…å ±ã‚’æŒã£ã¦ãã‚‹ãŸã‚ `_generated` ã«å¯¾ã—ã¦ãƒ›ãƒ«ãƒ€ãƒ¼æƒ…å ±ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦ãŠãã¨ä¾¿åˆ©ã§ã™ã€‚MerkleTree ã¯ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆå´ã« root hash ã‚’æ›¸ãè¾¼ã‚€ãŸã‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã‚‚é »ç¹ã«æ›¸ãæ›ãˆã‚‹ãƒ¢ãƒã§ã¯ãªã„ã§ã™ã€‚ã¾ãŸ csv ã‚„ json ã§ç®¡ç†ã•ã‚Œã‚‹ã®ãŒã»ã¨ã‚“ã©ã§ã™ãŒã€ã“ã‚Œã‚‰ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦æ¨¡ã«ã‚ˆã£ã¦ã‚‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã¨ã—ã¦å°‘ã—å¤§ããªã‚‚ã®ã«ãªã‚ŠãŒã¡ã§ã™ã€‚ãã®ãŸã‚ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã® chunk ã«ã¯å«ã‚ãŸããªã„ã®ã§ API Route ã§ API ã¨ã—ã¦æä¾›ã™ã‚‹å½¢ã«ã—ã¾ã—ãŸã€‚ãŸã ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ path ã«å…¥ã‚Œã¦ã‚‚ã‚‰ã£ã¦ API ã‚’ã‚³ãƒ¼ãƒ«ã—ã¾ã™ãŒæ›¸ãæ›ãˆãŒé »ç¹ã§ã¯ãªã„ã®ã§ã€cache-control ã¯æ”»ã‚æ°—å‘³ãªã‚‚ã®ã‚’ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»Šå› proof ã¯ `Cache-Control: public, max-age=3600, immutable, stale-if-error=60` ã¨ã—ã¾ã—ãŸã€‚cache-control ã® immutable ã«é–¢ã—ã¦ã¯ [jxck ã•ã‚“ã®ãƒ–ãƒ­ã‚°](https://blog.jxck.io/entries/2016-07-12/cache-control-immutable.html)ãŒå‚è€ƒã«ãªã‚Šã¾ã—ãŸã€‚

proof ä»¥å¤–ã«ã‚‚ IROIRO ã® NFT ã®æƒ…å ±è‡ªä½“ãªã©ã¯ [Alchemy](https://www.alchemy.com/nft-api) ã® NFT API ã‚’ç”¨ã„ã¦å®Ÿè£…ã—ã¦ã„ã¾ã™ãŒã€ã“ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ¸›ã‚‰ã™ã®ã¨ API Key ãŒå¤–éƒ¨ã«éœ²å‡ºã—ãªã„ã‚ˆã†ã« API Route ã§ wrap ã—ã¦ cache-control ã‚’é©åˆ‡ã«ã¤ã‘ã¦ã„ã¾ã™ã€‚

### Remix ã®å®Ÿè£…

è‰²ç¥ã‚’ä½¿ã£ã¦æ–°ã—ã„ IROIRO ã‚’ä½œã‚‹ã“ã¨ã‚’ [Remix](https://etherscan.io/address/0x07493f6d027de62a9a84d1f6359c85f66d55ff70) ã¨å‘¼ã‚“ã§ã„ã¾ã™ã€‚ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã§ã¯è‰²ç¥ã® burn ã¨æ–°ã—ã„ IROIRO ã® mint ã‚’åŒæ™‚ã«è¡Œã„ã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/8636955854e6-20230904.png)

```solidity
function remixIROIROWithShikigami(uint256 shikigamiId, uint256 iroiroId, uint256 choice, address vault) external returns(uint256) {
  uint iroiroRemixId = constructRemixId(shikigamiId,iroiroId,choice); // Creates ID for IROIRORemix by calling constructRemixId

  require(mintActive, "Mint is not active!");
  require(!_exists(iroiroRemixId), "You've already remixed this IROIRO with this Shikigami!"); // Checks if already minted

  // Check for delegation
  if (vault == address(0)) {
      vault = msg.sender;
  } else {
      require(registry.checkDelegateForContract(msg.sender, vault, address(this)), "Sender is not delegated!"); // Checks delegation
  }

  require(vault == iroiro.ownerOf(iroiroId), "Ownership of IROIRO Id is not confirmed!"); // Checks IROIRO ownership

  shikigami.burnShikigami(vault, shikigamiId, choice); // Burns one Shikigami of shikigamiId
  _mint(vault, iroiroRemixId); // Mints one IROIRORemix

  emit IROIRORemixed(shikigamiId, iroiroId,  choice, iroiroRemixId);
  return iroiroRemixId;
}
```

ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚³ãƒ¼ãƒ«ã¯ä¸Šè¨˜ã¨åŒã˜å®Ÿè£…ã§è¡Œã„ã¾ã™ãŒã€ä»Šå›ã¯ remix ã™ã‚‹å‰ã®æ®µéšã§ remix å¾Œã©ã‚“ãªã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã«ãªã‚‹ã®ã‹ã‚’è¦‹ã›ã¦ã„ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®å¥½ããªæ–¹ã‚’é¸ã‚“ã§ mint å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/1a58ed67bea9-20230904.png)

ã“ã®éš›ã«ã€NFT ã®ç”»åƒã¯ IPFS ã¨ã„ã†åˆ†æ•£ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã®ãŒã‚ˆã„ã¨ã•ã‚Œã¦ã‚‹ã‚‚ã®ãŒå¤šã„ã§ã—ã‚‡ã†ã€‚ãŸã ã— IPFS ã¯ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¯¾ã—ã¦å¼·ã„ã§ã™ãŒè¡¨ç¤ºã—ãŸã‚Šã™ã‚‹ã®ã«å°‚ç”¨ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ã†ãŸã‚ä¸€èˆ¬çš„ã«ã¯ gateway ã¨è¨€ã‚ã‚Œã‚‹ã‚µãƒ¼ãƒãƒ¼ã‚’ä»‹ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ãŒã»ã¨ã‚“ã©ã§ã—ã‚‡ã†ã€‚IROIRO ã§ã¯ã“ã®é¸æŠè‚¢ã®ç”»åƒã¯ GCP ã®ã‚µãƒ¼ãƒãƒ¼ã«ãŠã„ã¦ãŠãã€NFT ã® image ã«ã¯ IPFS ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡ã™ã‚ˆã†ãªè¨­è¨ˆã«ã—ã¦ gateway ã‚’æŒŸã¾ãªãã¦ã‚‚ã‚ˆã„ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚gateway ã¯è‰²ã€…ãªã‚µãƒ¼ãƒ“ã‚¹ãŒå­˜åœ¨ã—ã¾ã™ãŒã€æˆ‘ã‚‰ãŒï¼ˆï¼Ÿï¼‰Cloudflare ã‚‚ã ã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚

https://developers.cloudflare.com/web3#ipfs-gateway

proof ã®å–å¾—ãªã©ã¯ [swr](https://swr.vercel.app/ja) ã‚’ä½¿ã£ã¦ã„ã¾ã™ãŒã€å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ä½•ã‹ç‰¹æ®Šãªå¤‰æ›´ã‚’ã—ã¦ãã‚Œã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ãƒ†ãƒ¼ãƒˆã¸å…¥ã‚ŒãŸã„å ´åˆå°‘ã—å›°ã‚Šã¾ã—ãŸã€‚å¤‰æ›´ã™ã‚‹ã ã‘ã§ã‚ã‚Œã° custom hooks ã®ä¸­ãªã©ã§ `return` ã™ã‚‹å‰ã«å¤‰æ›´ã™ã‚‹ã ã‘ã§å•é¡Œãªã„ã§ã™ãŒã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ãƒ†ãƒ¼ãƒˆã«ã„ã‚ŒãŸã„ã¨ãªã‚‹ã¨ãƒ‡ãƒ¼ã‚¿ãŒå¤‰ã‚ã£ãŸæ™‚ã ã‘ã‚’æ‰±ã„ãŸã„ã®ã§ [`onSuccess`](https://swr.vercel.app/ja/docs/mutation.ja#useswrmutation-parameters) ã‚’æ´»ç”¨ã—ã¾ã—ãŸã€‚`useEffect` ã§å€¤ã‚’è¦‹ã¦ãŠãã“ã¨ã¯ã§ãã‚‹ã®ã§ã™ãŒã€[escape hatches](https://react.dev/learn/escape-hatches#you-might-not-need-an-effect) ã®ä¸­ã§ç´¹ä»‹ã•ã‚Œã¦ã‚‹é€šã‚Šé¿ã‘ãŸæ–¹ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚

# Collaborator ğŸ¤

ã“ã®è¨˜äº‹ã¯æ§˜ã€…ãªæ–¹ã®è²¢çŒ®ã«ã‚ˆã‚Šå¯„ç¨¿ã§ãã¾ã—ãŸã€‚

## [kiwi.eth](https://twitter.com/0xKiwi_/photo)

![kiwi icon](https://i.seadn.io/gcs/files/52da1f847f222edf5d3e7b7d7fd056f3.png?auto=format&dpr=2&w=800)

Hi! I'm Kiwi!
I've been a dev in crypto since falling in love with Ethereum in 2017, I even worked for Ethereum towards the Proof of Stake and Merge effort for 2 years!
Nowadays I work closely with hundreds of anime artists as a I lead the teams of uwucrew and Killer GF.
I'm a huge fan of anime art and believe collecting anime art is something every anime fan can truly enjoy!

IROIRO Remix ã§ã¯ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å®Ÿè£…ã‚’æ‹…å½“ã—ã¦ã„ãŸã ãã€è¨˜äº‹ã§ã¯ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®è¨­è¨ˆã«ã¤ã„ã¦ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚

## [ã˜ã‚‡ã‚ã‚“ãª-Joanna- @web3 ãŠå§‰ã•ã‚“](https://twitter.com/aonisai_natuki)

![joanna icon](https://i.seadn.io/gcs/files/39edb50ed019572a119f4cb0ba826bb5.png?auto=format&dpr=2&w=800)

IROIRO ã®ã‚³ãƒ©ãƒœãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã€‚

è¤‡æ•°ã®äººæ°— NFT ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é‹å–¶ã«æºã‚ã‚Šã€è‹±èªãƒ»ä¸­å›½èªã‚’ç”Ÿã‹ã—ãŸæµ·å¤–ãƒ•ã‚¡ãƒ³ã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¾—æ„ã¨ã™ã‚‹ã€‚

æœ¬è¨˜äº‹ã®å’Œè¨³ã‚’æ‹…å½“ã—ã¦ã„ãŸã ãã¾ã—ãŸã€‚
